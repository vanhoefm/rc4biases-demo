window.NYTADX={},window.NYTADX.positions=["Header1","Middle1C","TopLeft","TopRight","Top5","Top","Top_Close","Box1","Bar1","MOTHAd","Middle","HPmodule-RE2","Middle4","Middle5","HPMiddle","HPMiddle3","HPPromo","HPBottom1","HPMidLeader","HPBreak","HPSponLink","HPWeather","Bottom8","Bottom9","Anchor","Inv1","Inv2","Inv3","ab1","ab2","ab3","prop1","prop2"],window.NYTADX.buildAdx=function(keywords,sensitivity,isBlocking){"use strict";var params={},host="www.nytimes.com",processUrlParams=function(){var i,param,len,urlParams,urlString=window.location.search;if(0===urlString.length)return!1;for(urlParams=urlString.substring(1).split("&"),i=0,len=urlParams.length;len>i;i+=1)param=urlParams[i].split("="),param[1]&&param[1].indexOf(",")>=0?params[param[0]]=param[1].split(","):params[param[0]]=param[1]||""},getPage=function(){var page=params.adx_campaign;return params.adx_campaign||(sensitivity?page="www.nytimes.com/"+sensitivity:(page=window.location.host.indexOf("international")>-1?"international-home":"homepage",page+=".nytimes.com/index.html")),page},getPositions=function(){var exclusions,i,j;if(params.adx_positions)return params.adx_positions;if(params.adx_exclude_positions)for(exclusions=params.adx_exclude_positions,i=0;i<window.NYTADX.positions.length;i+=1)for(j=0;j<exclusions.length;j+=1)window.NYTADX.positions[i]===exclusions[j]&&window.NYTADX.positions.splice(i,1);return window.NYTADX.positions.join(",")},getKeywords=function(){return keywords.push("nyt5"),"1"===params["WT.z_jog"]&&keywords.push("rf"),params["ad-keywords"]&&keywords.push(params["ad-keywords"]),encodeURIComponent(keywords.join(","))},getAdxSettings=function(){var param,i,deliveryProofParams=["adxforce","debug"],settings=["autoconfirm=0","cpp=1","v=3","attributes=nyt5"];for(i=deliveryProofParams.length-1;i>=0;i-=1)param=params[deliveryProofParams[i]],"undefined"!=typeof param&&settings.push(deliveryProofParams[i]+"="+(param||"1"));return settings.join("&")},constructUrl=function(){return"http://"+host+"/adx/bin/adxrun.html?jsonp=NYTADX.processAdx&page="+getPage()+"&positions="+getPositions()+"&"+getAdxSettings()+"&keywords="+getKeywords()};processUrlParams(),/sbx|dev|stg/.test(window.location.host)&&(host="www.stg.nytimes.com"),(isBlocking===!0||"undefined"==typeof isBlocking)&&document.write('<script src="'+constructUrl()+'"></script>')},window.NYTADX.isBlank=function(ad){"use strict";var isBlank=!1;return ad=ad||{},"undefined"==typeof ad.classification?isBlank=!0:("blank"===ad.classification||"blank-but-count-imps"===ad.classification)&&(isBlank=!0),isBlank},window.NYTADX.processAdx=function(response){"use strict";var rootEl=document.getElementsByTagName("html")[0],ads=response.ads||{},isBlank=window.NYTADX.isBlank,hasAds=function(){var prop,keyCount=0;if(Object.keys)return 0!==Object.keys(ads).length;for(prop in ads)ads.hasOwnProperty(prop)&&(keyCount+=1);return 0!==keyCount};ads.Middle4&&!isBlank(ads.Middle4)&&(rootEl.className+=" has-middle4-ad"),(ads.HPMiddle&&!isBlank(ads.HPMiddle)||ads.Middle&&!isBlank(ads.Middle))&&(rootEl.className+=" has-tall-c-column-ad "),ads.MOTHAd&&!isBlank(ads.MOTHAd)&&(rootEl.className+=" has-moth-ad"),hasAds()||(rootEl.className+=" no-ads"),ads&&(window.NYTADX.response=response)},window.NYTADX.paintAd=function(name){"use strict";var ad,confirmImage,confirmUrl,adx=window.NYTADX;adx&&adx.response&&adx.response.ads&&adx.response.ads[name]&&(ad=adx.response.ads[name],confirmUrl=ad["confirmation-url"],document.getElementById(name).innerHTML=ad.creative,confirmUrl&&""!==confirmUrl&&(confirmImage=new Image,confirmImage.src=confirmUrl),window.NYTADX.response.ads[name].hasPainted=!0)},window.NYTADX.setDimensions=function(name){"use strict";var ad,height,el=document.getElementById(name),adx=window.NYTADX;el&&adx&&adx.response&&adx.response.ads&&adx.response.ads[name]&&(ad=adx.response.ads[name],height=ad.height,height&&(el.className=el.className.replace(/hidden/,""),el.style.minHeight=height+"px"),window.NYTADX.isBlank(adx.response.ads[name])&&(document.getElementById(name).style.display="none"))};